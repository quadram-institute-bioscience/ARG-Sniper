/*
================================================================================
                    ARG-Sniper Nextflow Configuration File
================================================================================
Set default parameters

Any parameters provided by the user with a -params-file or
with -- command-line arguments will override the values defined below.
================================================================================
*/

params {
    // ================================================================================
    //                              BASE DIRECTORIES
    // ================================================================================
    databases_dir          = "/qib/platforms/Informatics/transfer/outgoing/databases/arg-sniper"
    singularity_images_dir = "/qib/platforms/Informatics/transfer/outgoing/singularity/arg-sniper"

    // ================================================================================
    //                              INPUT/OUTPUT PARAMETERS
    // ================================================================================
    reads           = "reads/*_R{1,2}.fastq.gz"
    output          = './results'
    work_dir        = './work'

    // ================================================================================
    //                              DATABASE PATHS
    // ================================================================================
    grootdb         = "${databases_dir}/panarg_2_groot/index"
    aribadb         = "${databases_dir}/panarg_2_ariba/prepare"
    srst2db         = "${databases_dir}/panarg_2_srst2/sequence.fa"
    kargadb         = "${databases_dir}/panarg_2_karga/sequence.fa"
    argprofilerdb   = "${databases_dir}/panarg_2_argprofiler"
    metadata_file   = "${databases_dir}/panARG/overview/panARG_annotations.tsv"

    // ================================================================================
    //                              TOOL-SPECIFIC PARAMETERS
    // ================================================================================
    groot_cov       = 0.95

    // ================================================================================
    //                              RESOURCE ALLOCATION
    // ================================================================================
    NCPUS           = 8
    MEM             = "16 GB"

    // ================================================================================
    //                              SINGULARITY CONTAINERS
    // ================================================================================
    container__srst2    = "${singularity_images_dir}/srst2-2.0.0.img"
    container__groot    = "${singularity_images_dir}/groot-1.1.2--heaae5f8_5.img"
    container__ariba    = "${singularity_images_dir}/ariba_2.14.6--py39heaaa4ec_6.img"
    container__karga    = "${singularity_images_dir}/karga-1.02.img"
    container__kma      = "${singularity_images_dir}/kma-1.4.9.img"
}

// ================================================================================
//                                  NEXTFLOW-REPORTS
// ================================================================================
report.file = "${params.output}/nextflow-benchmark-report.html"

// ================================================================================
//                              EXECUTION PROFILES
// ================================================================================
profiles {
    qib {
        // Scheduler configuration
        process.executor        = 'slurm'
        process.queue          = 'qib-medium,qib-long'
        
        // Container configuration
        singularity.enabled     = true
        singularity.autoMounts  = true
        
        // Resource allocation
        process.memory          = params.MEM
        process.cpus           = params.NCPUS
    }
}